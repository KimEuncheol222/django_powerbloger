{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="/static/css/write.css?{% now "U" %}"/>
        <link href="{% static 'summernote/summernote.css' %}" rel="stylesheet">
        <script src="{% static 'summernote/summernote.js' %}"></script>
        <title>Write</title>
    </head>
    <body>
        <header>
            <div class="header_container">
                <div class="header_form">
                    <div class="logo_image">
                        <a href="{% url 'board' %}">
                            <img src="{% static 'img/sample_logo_dark.svg' %}" class="logo_image" />
                        </a>
                    </div>
                    <div class="right_container">
                        <div class="btn_container">
                            <form method="get" action="{% url 'search' %}">
                                {% csrf_token %}
                        </div>
                        <div class="btn_container">
                            <form method="get" action="{% url 'search' %}">
                                {% csrf_token %}
                                <button type="submit"><img src="{% static 'img/magnifier_dark.svg' %}" class="search_image" /></button>
                            </form>
                            <button class="header_btn" type="submit" id="dailyBtn"><a href="{% url 'filter_daily' %}">일상</a></button>
                            <button class="header_btn" type="submit" id="cookBtn"><a href="{% url 'filter_cook' %}">요리</a></button>
                            <button class="header_btn" type="submit" id="travelBtn"><a href="{% url 'filter_travel' %}">여행</a></button>
                            <button class="header_btn" type="submit" id="movieBtn"><a href="{% url 'filter_movie' %}">영화</a></button>
                            <button class="header_btn" type="submit" id="itBtn"><a href="{% url 'filter_it' %}">IT</a></button>
                        </div>
                        <div class="row_box">
                            {% if user.is_authenticated %}
                            <a href="{% url 'board' %}" class="logout_btn">Logout</a>
                            <a href="{% url 'write' %}" class="write_btn">Just Write!</a>
                            {% else %}
                            <a href="{% url 'login' %}" class="login_btn">Login</a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <section>
            <form method="post" action="{% url 'write' %}">
                {% csrf_token %}
                <div class="write-box">
                    <input type="text" id="title" name="title" class="title" placeholder="제목" value="{{ write_form.title }}" />
                    <div class="content">{{ write_form.content }}</div>
                </div>

                <div class="post-info-box">
                    <button type="button" id="aiAutocompleteButton" class="ai-button">
                        <img id="ai-img" src="{% static 'img/ai.svg' %}" alt="AI 아이콘" />
                        <div id="loading-animation" style="display: none;">
                        <img src="{% static 'img/loading.gif' %}" alt="로딩 중" />
                        </div> 
                    AI 글 자동완성
                    </button>

                    <div class="box">
                        <h2>TOPIC</h2>
                        {{ write_form.topic }}
                    </div>

                    <div class="box">
                        <div class="info">
                            <h2>UPLOAD INFO</h2>
                        </div>
                        <div class="save-box">
                            {% if edit_mode %}
                            <input
                                type="submit"
                                name="delete-button" 
                                class="delete-button"
                                value="삭제"
                            />
                            <input
                                type="submit"
                                class="save-button"
                                value="수정"
                            />
                            
                            {% else %}
                            <a href="{% url 'board' %}">임시저장목록</a>
                            <input type="submit" name="temp-save-button" class="temp-save-button" value="임시저장" />
                            <input type="submit" name="save-button" class="save-button" value="글 작성" />
                            {% endif %}
                        </div>
                    </div>
            </form>
        </section>

        <footer>

        </footer>
    </body>
    <script>
        $(document).ready(function() {
        $('#id_content').summernote();  // content 필드에 Summernote 적용
        });
    </script>
</html>
