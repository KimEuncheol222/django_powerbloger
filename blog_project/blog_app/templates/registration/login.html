{%load static%}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link href="{% static 'css/login.css' %}" rel="stylesheet" />
        <title>Login</title>
    </head>
    <body>
        <form action="{%url 'board_admin' %}" method="post">
            {% csrf_token %}
            <div class="main_container">
                <div class="login_text">Login</div>

                <div class="login_container">
                    <input placeholder="username" type="text" id="userId" required /><br />
                    <input placeholder="password" type="password" id="pwd" required />
                    <button class="login_btn" type="submit" id="loginBtn">Login</button>
                </div>
                {%for field in form %} {% comment %} 에러메세지 {% endcomment %} {% if field.error %}
                <div>
                    <strong> {{ field.label }} </strong>
                    {{field.error}}
                </div>
                {% endif %} {% endfor %}
                <div class="func_container">
                    <a href="{% url 'signup'%}" class="signup_btn" id="signupBtn">SignUp</a>
                    <a href="{% url 'find_password'%}" class="find_pwd" id="findPwd">Forgot password?</a>
                </div>
            </div>
        </form>
        <script>
            // 폼 제출 시 JavaScript를 사용하여 페이지 이동
            document.getElementById("loginForm").addEventListener("submit", function (event) {
                event.preventDefault(); // 기본 제출 동작 방지

                // 유저 정보를 서버로 전송하고, 서버에서 로그인 상태를 확인한 후 board_admin 페이지로 이동하도록 설정할 수 있음

                // 예: fetch() 또는 axios를 사용하여 서버로 데이터 전송 및 로그인 처리
                // 이후, 로그인이 성공하면 페이지 이동
                fetch("{% url 'login' %}", {
                    method: "POST",
                    body: new FormData(this),
                })
                    .then((response) => {
                        if (response.status === 200) {
                            // 로그인이 성공한 경우
                            window.location.href = "{% url 'board_admin' %}";
                        } else {
                            // 로그인이 실패한 경우 또는 오류가 발생한 경우에 대한 처리
                            document.getElementById("errorMessage").textContent = "아이디를 다시 확인해주세요";
                        }
                    })
                    .catch((error) => {
                        console.error("Error:", error);
                    });
            });
        </script>
    </body>
</html>
